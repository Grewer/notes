const path = require('path');
// const nodeResolve = require('@rollup/plugin-node-resolve');
const pkg = require('./package.json');
import ts from '@rollup/plugin-typescript'

const extensions = ['.ts'];

const resolve = function(...args) {
    return path.resolve(__dirname, ...args);
};

module.exports = {
    input: resolve('./src/index.ts'),
    output: {
        file: resolve('./', pkg.main), // 为了项目的统一性，这里读取 package.json 中的配置项
        format: 'esm',
    },
    plugins: [
        // nodeResolve({
        //     extensions,
        //     modulesOnly: true,
        // }),
        ts({
            tsconfig: path.resolve(__dirname, 'tsconfig.json')
        })
    ],
};