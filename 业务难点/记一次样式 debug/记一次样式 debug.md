
## 背景

在一次平凡的工作日中，突然有客户说我们产品的弹窗点击无法显示，这让我立刻放下了手里的活，去看了看，结果却是一切正常

这不禁产生了好奇心，所以需要客户截屏或者截图一下给我们看看，最后发现在客户的电脑上确实点击无效，这是一个很神奇的事情，开发这么多年没见过此场景
## 现状

目前我们的产品是 web 项目， modal 使用的是 antd 的 modal，可以在钉钉中被使用，而且因为注册了钉钉的应用，所以打开是通过钉钉的浏览器，难道是钉钉的兼容性问题？

所以也问了下客户，给到的回复是：他们使用的是最新版本的钉钉。

但是我们也是相同版本，那差异性，就应该在系统上了，所以问了下系统 todo

新的疑问：难道是系统的原因？

但是因为我们这并没有此系统版本，所以先尝试盲改一波看看效果

## 第一次尝试

暂定的结论是：动画导致的加载异常，因为之前产品里碰到过一次类似的：因为动画导致的性能卡顿，而去除了全局动画
并且在之前加载的时候因为没加 3 的动画（transform），导致 modal 加载出现异常的场景

根据上述两个类似经验，这应该就是动画的问题了

说干就干

我先将 modal 的 css 添加了新的样式：

```

 z-INDEX
 
```


打算上了线之后看看

结果很遗憾，并没有生效，仍旧是一点水花都没有激起

## 远程查看


这次我们再尝试远程下，因为要客户配合，我们要一起挑一个时间。

这次我们将 vconsole 也显示了出来，通过他的查看 element 功能，可以看到 dom 里的 antd modal 结构是正常加载的， 但是缺一直没有显示

并且我们也在系统的 safari 里打开了链接，结果却是显示正常

所以现在的问题根源可以定位于钉钉的默认浏览器兼容有问题

## 复现

因为要低版本的 mac 我们尝试了两种方案，一是向公司 it 借对应版本的 mac，
二是虚拟机

借 mac 的话，很遗憾，经常是处于空仓的程度，所以借不到，而在尝试虚拟机的时候，因为对应低版本 mac 是 intel，而我的系统是 m1 版本，所以也装不上对应的虚拟机，所以最终也是接别人的 intel mac 来装虚拟机


最终在对应版本的虚拟机上成功复现此场景，在能够复现后，那我们可能通过各类方案进行尝试了

## 解决方案

## 总结